<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<addon id="script.jellyfin-fixer" name="Jellyfin Fixer" version="0.0.2" provider-name="bossanova808">
    <requires>
        <import addon="xbmc.python" version="3.0.0"/>
        <import addon="script.module.bossanova808" version="1.0.2"/>
    </requires>
    <extension library="default.py" point="xbmc.service" />
    <extension point="xbmc.addon.metadata">
        <summary lang="en_GB">Jellyfin Playback Fixer</summary>
        <description lang="en_GB">
Hacked together add-on to try and solve some very annoying Jellyfin for Kodi problems:
- Resume point is almost always wrong - randomly from some seconds to several minutes prior to actual resume point!
- Resume point occasionally seems to be randomly cleared, and playback will go back to the start
- Kodi doesn't display subtitles without a long delay (https://github.com/jellyfin/jellyfin-kodi/issues/35, https://github.com/xbmc/xbmc/issues/21086 etc), this improves after a seek

This addon detects the start of playback.
If Kodi is playing back a library item (episode or movie), and there is a known resume point - force Kodi to seek to that resume point.
If no resume point, or the resume point is at less than 20s, perform a seek to 0 to try and cause the display of subtitles to occur earlier.

Known Issues:
*** This breaks the 'play from beginning' method that Kodi offers. ***
        
        </description>
        <platform>all</platform>
        <license>GPL-3.0-only</license>
        <website>https://github.com/bossanova808/repository.bossanova808/</website>
        <source>https://github.com/bossanova808/repository.bossanova808/</source>
        <forum />
        <email />
        <news>v0.0.2
- Use more common code
        </news>
        <assets>
            <icon>resources/icon.png</icon>
        </assets>
    </extension>
</addon>
